<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mckaziwe Media</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/sidebars/">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.css">
  <link href="../assets/css/style.css" rel="stylesheet">

</head>

<body>
  <div class="p-3 side-bar bg-dark" style="width: 350px;">
    <a href="/" class="d-flex align-items-center pb-3 mb-3 link-white text-decoration-none border-bottom">
      <img class="bi pe-none me-2" width="30" height="24" src="assets/img/images.jpg">
      <span class="fs-5 fw-semibold">Mckaziwe Media</span>
    </a>
    <ul class="list-unstyled ps-0 side-bar-menu">
      <li class="mb-1 nav-item">
        <a href="#" class="btn  d-inline-flex align-items-center rounded border-0" aria-expanded="true">
          Home
        </a>
      </li>
      <li class="mb-1">
        <a href="#" id="collapsible" class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed"
          data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-expanded="false">
          Portifolio
        </a>
        <div class="collapse" id="dashboard-collapse">
          <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
            <li><a href="#" class="link-white d-inline-flex text-decoration-none ">Creative Design</a></li>
            <li><a href="#" class="link-white d-inline-flex text-decoration-none ">Brand & Identity</a></li>
            <li><a href="#" class="link-white d-inline-flex text-decoration-none ">Company Profile/Booklets</a></li>
            <li><a href="#" class="link-white d-inline-flex text-decoration-none ">Photography</a></li>
            <li><a href="#" class="link-white d-inline-flex text-decoration-none ">Videography</a></li>
            <li><a href="#" class="link-white d-inline-flex text-decoration-none ">Mockups</a></li>
          </ul>
        </div>
      </li>
      <li class="mb-1 nav-item">
        <a href="#" class="btn  d-inline-flex align-items-center rounded border-0" aria-expanded="true">
          About
        </a>
      </li>
      <li class="mb-1 nav-item">
        <a href="#" class="btn  d-inline-flex align-items-center rounded border-0" aria-expanded="true">
          Contact
        </a>
      </li>
    </ul>
  </div>
  <main>
    <form id="appointment-form" method="post" class="card container border-0">
      <h1>Book Appointment</h1>
      <div class="separator bt-1 mb-2"></div>
      <div class="my-3" id="page-1">
        <h3>What type service do you want?</h3>

        <div class="card container py-2 mb-2 bg-light mt-4">
          <div class="form-check">
            <input id="creative-design" name="chooseService" type="radio" class="form-check-input" checked required>
            <label class="form-check-label" for="creative-design"><strong>Creative Design</strong>
              <p><small><em>Includes Logo design and 3D mockups</em> </small> </p>

            </label>

          </div>

        </div>

        <div class="card container py-2 mb-2 bg-light">
          <div class="form-check">
            <input id="photography-videography" name="chooseService" type="radio" class="form-check-input" required>
            <label class="form-check-label" for="photography-videography"><strong>Photography & Videography</strong>
              <p><small><em>Includes Weddings, Kitchen parties etc...</em> </small> </p>

            </label>
          </div>

        </div>
        <div class="card container py-2 mb-2 bg-light">
          <div class="form-check">
            <input id="Social-media-management" name="chooseService" type="radio" class="form-check-input" required>
            <label class="form-check-label" for="Social-media-management"><strong>Social Media Management</strong>
            </label>
          </div>
        </div>
        <div class="card container py-2 mb-2 bg-light">
          <div class="form-check">
            <input id="Printing-and-supply" name="chooseService" type="radio" class="form-check-input" required>
            <label class="form-check-label" for="Printing-and-supply"><strong>Printing and Supply</strong>
              <p><small><em>Includes Pens, Banners, Pop up banners, Backdrops, T-shirts, Diaries, Calendars,
                    Billboards</em> </small> </p>

            </label>
          </div>

        </div>

      </div>
      <div class="my-3 hidden" id="page-2">
        <h3>Provide a brief description of what you need.</h3>

        <div class="card container py-2 mb-2 bg-light mt-4">
          <textarea name="description" id="description" rows="3" style="width:100%">Type here...</textarea>

        </div>

      </div>

      <div class="my-3 hidden" id="page-3">
        <h3>Enter your personal details</h3>

        <div class="my-3 row">
          <div class="col col-sm-12 col-md-7">
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="fullName" name="fullName" placeholder="Full names">
              <label for="fullName">Full names</label>
            </div>
          </div>
          <div class="col col-sm-12 col-md-5">
            <div class="form-floating mb-3">
              <input type="tel" class="form-control" id="phone-number" name="phoneNumber" placeholder="Full names">
              <label for="phone-number">Phone number</label>
            </div>
          </div>
          <div class="col col-sm-12 col-md-12">
            <div class="form-floating mb-3">
              <input type="tel" class="form-control" id="email" name="email" placeholder="Full names">
              <label for="phone-number">Email</label>
            </div>
          </div>


        </div>

      </div>
      <p style="text-align: right;">
        <button class="btn btn--outline-secondary btn-lg" id="previous-button">Previous</button>
        <button class="btn btn-primary btn-lg" id="next-button">Next</button>

      </p>
    </form>





  </main>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
  <script type="text/javascript" src="../assets/js/jquery.js"></script>
  <script>
    window.currentPage = 0; // keeps track of the page user is on
    window.postUrl = "http://127.0.0.1:8000/appointment/"
    $("#next-button").click(function (event) { //  controls forward form navigation
      event.preventDefault();
      if (currentPage == 0) {
        // show page 2
        // hide page 1
        $("#page-1").addClass("hidden");
        $("#page-2").removeClass("hidden");


        //$("#next-button").removeClass("hidden");
        window.currentPage = 1;
      } else if (currentPage == 1) {
        // hide page 2 show page 3
        $("#page-2").addClass("hidden");
        $("#page-3").removeClass("hidden");
        $("#next-button").html("Submit")
        //$("#next-button").addClass("hidden");
        //$("#submit").removeClass("hidden");
        window.currentPage = 2;

      } else if (currentPage == 2) {
        // submit form
        var data_dirty = $("#appointment-form").serializeArray()
        var data = {}
        data_dirty.forEach(element => {
          data[element.name] = element.value
        });
        data.credentials = 'include'
        console.log("Submiting from")
        let xhr = new XMLHttpRequest();
        $('#next-button').prop('disabled', true);
        xhr.onload = function () {
          if (xhr.status != 200) { // analyze HTTP status of the response
            alert(`Error ${xhr.status}: ${xhr.statusText}`); // e.g. 404: Not Found
          } else { // show the result
            alert(`Appointment Sent Successfully, Check your email`); // response is the server response
          }
        };

        xhr.open("POST", window.postUrl)
        xhr.send(JSON.stringify(data))
      }
    });

    $("#previous-button").click(function (event) { //  controls backward form navigation
      event.preventDefault();
      if (currentPage == 0) {
        // do nothing
      } else if (currentPage == 1) {
        // show page 1
        // hide page 2
        $("#page-1").removeClass("hidden");
        $("#page-2").addClass("hidden");
        window.currentPage = 0;
      } else if (currentPage === 2) {
        // show page 2 hide page 3
        $("#page-2").removeClass("hidden");
        $("#page-3").addClass("hidden");
        $("#next-button").html("Next")
        window.currentPage = 1;
      }
    });

  </script>
</body>

</html>